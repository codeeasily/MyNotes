# 索引的类型
索引是基于存储引擎层实现的，没有统一的标准。不同的存储引擎的索引工作方式并不一样，即便采用同一种类型的索引，不同引擎的实现也可能不同。
## 按照索引的数据结构分类
- B-Tree索引
  > 人们讨论索引的时候，如果没有特别指明类型，那多半说的是B-Tree索引。它使用B-Tree数据结构来存储数据。
  > 
  > 不过底层的存储引擎也可能使用不同的存储结构，例如，NDB集群存储引擎内部实际上使用了T-Tree结构存储这种索引，及时其名字是BREE；InnoDB则使用的事B+Tree。
  > 
  > 限制：
  > 
  > - 如果不是按照索引的最左列开始查找，则无法使用索引。
  > - 不能跳过索引中的列。
  > - 如果查询中有某个列的范围查询，则其右边所有列都无法使用索引优化查找。

- 哈希索引
  > Memery引擎支持，使用场景简单。
  > 
  > 基于哈希表实现，只有精确匹配索引所有列的查询才有效。
  > 
  > 限制：
  > - 哈希索引只包含哈希值和行指针，而不存储字段值，所以不能使用索引中的值来避免读取行。
  > - 哈希索引数据并不是按照索引值顺序存储的，所以也就无法用于排序。
  > - 哈希索引也不支持部分索引列的匹配查找，因为哈希索引始终是使用索引列的全部内容来计算哈希值的。
  > - 哈希索引只支持等值比较查询，也不支持任何范围查询。
  > - 访问速度非常快，除非有很多哈希冲突。
  > - 如果哈希冲突很多的话，一些索引维护操作的代价也会很高

InnoDB引擎有一个特殊的功能叫做 **"自适应哈希索引"**。

当InnoDB注意到某些索引值被使用的非常频繁时，会在内存中基于B-Tree索引之上再创建一个哈希索引，这样就让B-Tree索引也具有哈希索引的一些优点，比如快速查找。
这是一个完全自动的、内部的行为，用户无法控制和配置，但是可以完全关闭该功能。
- 空间数据索引（R-Tree）
  > MyISAM表哦支持空间索引，可以用作地里数据存储。
  > 
  > 和B-Tree所以不同，这类索引无需前缀查询。空间索引会从所有维度来索引数据。查询时，可以有效的使用任意维度来组合查询。
  > 
  > 必须使用MySQL的GIS相关函数如MBRCONTAINS()等来维护数据。 MySQL的GIS支持并不完善，所以大部分人都不会使用这个特性。开源关系数据库系统中对GIS的解决方案做得比较好的事PostgreSQL的POSTGIS。
- 全文索引(Full-text)
  > 也是MyISAM引擎的一个特殊索引类型，InnoDB从MySQL 5.6版本开始提供对全文索引的支持。
- 其他索引类型
  > 很多第三方的存储引擎使用不同类型的数据结构来存储索引。如TokuDB使用分形树索引，这是一类较新开发的数据结构，既有B-Tree的很多优点，也避免了B-Tree的一些缺点。

## 按照物理存储分类
- 聚集索引
  > InnoDB表要求必须有聚簇索引，默认在主键字段上建立聚簇索引，在没有主键字段的情况下，表的第一个非空的唯一索引将被建立为聚簇索引，在前两者都没有的情况下，InnoDB将自动生成一个隐式的自增id列，并在此列上建立聚簇索引。
- 非聚集索引（也叫二级索引、辅助索引）
  > 非聚集索引的结构和聚集索引基本相同（非叶子结点存储的都是索引指针），区别在于叶子节点存放的不是行数据而是数据主键。因此在使用非聚集索引进行查找时，需要先查找到主键值，然后再到聚集索引中进行查找。
## 按照字段特性分类
- 主键索引
  > 建立在主键上的索引被称为主键索引，一张数据表只能有一个主键索引，索引列值不允许有空值，通常在创建表时一起创建。
- 唯一索引
  > 建立在UNIQUE字段上的索引被称为唯一索引，一张表可以有多个唯一索引，索引列值允许为空，列值中出现多个空值不会发生重复冲突。
- 普通索引
  > 建立在普通字段上的索引被称为普通索引。
- 全文索引
  > MyISAM 存储引擎支持Full-text索引，用于查找文本中的关键词，而不是直接比较是否相等。Full-text索引一般使用倒排索引实现，它记录着关键词到其所在文档的映射。
  > 
  > InnoDB 存储引擎在 MySQL 5.6.4 版本中也开始支持Full-text索引
## 按字段个数分类
- 单列索引
- 联合索引（也叫组合索引、复合索引）